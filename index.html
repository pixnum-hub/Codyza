<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Codyza</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="theme-color" content="#111">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.15/codemirror.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.15/theme/dracula.min.css">

<style>
:root{
  --glass: rgba(255,255,255,0.12);
  --border: rgba(255,255,255,0.28);
  --blur: blur(18px);
  --dark: rgba(0,0,0,0.55);
}
*{box-sizing:border-box;margin:0;padding:0;}
body{
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  font-family:system-ui,Segoe UI;
  background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
  color:#fff;
}
body.dark{background:linear-gradient(135deg,#000,#111,#222);}

#appFrame{
  width:96%;
  max-width:720px;
  min-height:96vh;
  display:flex;
  flex-direction:column;
  gap:12px;
  padding:14px;
  border-radius:22px;
  border:1px solid var(--border);
  background:var(--glass);
  backdrop-filter:var(--blur);
  position:relative;
}

#title{text-align:center;font-size:20px;font-weight:600;}

#darkToggle{
  position:absolute;
  top:12px;
  right:12px;
  width:44px;
  height:44px;
  border-radius:50%;
  border:none;
  background:var(--dark);
  color:#fff;
  font-size:20px;
  cursor:pointer;
}

.controls{
  display:flex;
  flex-wrap:wrap;
  gap:8px;
}
.controls button{
  flex:1 1 calc(33% - 8px);
  padding:8px;
  border-radius:12px;
  border:none;
  background:var(--dark);
  color:#fff;
  font-size:14px;
}
@media(max-width:600px){
  .controls button{flex:1 1 100%;}
}

.panel{
  border-radius:16px;
  background:var(--glass);
  overflow:hidden;
}

#editorWrap{min-height:240px;}
#previewWrap{min-height:360px;}
#consoleWrap{min-height:120px;}

.CodeMirror{height:100%;font-size:14px;}

#preview{
  width:100%;
  height:100%;
  border:none;
  background:#fff;
}

.resizer{
  height:6px;
  background:rgba(255,255,255,0.25);
  cursor:ns-resize;
}

#console{
  background:#000;
  color:#0f0;
  padding:6px;
  font-family:monospace;
  height:100%;
  overflow:auto;
}

.floating{
  position:fixed;
  bottom:16px;
  right:16px;
  display:flex;
  gap:8px;
}
.floating button{
  width:44px;
  height:44px;
  border-radius:50%;
  border:none;
  background:rgba(0,0,0,0.65);
  color:#fff;
  font-size:18px;
}

footer{
  text-align:center;
  font-size:12px;
  opacity:0.8;
}

/* ðŸ”¥ FULLSCREEN PREVIEW MODE */
#appFrame.preview-only #editorWrap,
#appFrame.preview-only #editorResizer,
#appFrame.preview-only #consoleWrap,
#appFrame.preview-only #previewResizer,
#appFrame.preview-only .floating,
#appFrame.preview-only .controls {
  display:none;
}

#appFrame.preview-only #previewWrap{
  position:fixed;
  inset:0;
  width:100vw;
  height:100vh;
  border-radius:0;
  z-index:9999;
  background:#fff;
}
</style>
</head>

<body>
<div id="appFrame">
  <button id="darkToggle">ðŸŒ“</button>
  <div id="title">Codyza</div>

  <div class="controls">
    <button id="runBtn">â–¶ Run</button>
    <button onclick="clearEditor()">ðŸ§½ Clear Code</button>
    <button onclick="clearPreview()">ðŸ§¹ Clear Preview</button>
    <button onclick="toggleAuto()">âš¡ Auto-Run</button>
    <button onclick="toggleFullPreview()">ðŸ–¥ Full Preview</button>
  </div>

  <div id="editorWrap" class="panel">
    <textarea id="editor"></textarea>
  </div>
  <div class="resizer" id="editorResizer"></div>

  <div id="previewWrap" class="panel">
    <iframe id="preview"></iframe>
  </div>
  <div class="resizer" id="previewResizer"></div>

  <div id="consoleWrap" class="panel">
    <div id="console"></div>
  </div>

  <footer>Â© Manik Roy 2025. All Rights Reserved.</footer>
</div>

<div class="floating">
  <button onclick="copyCode()">ðŸ“‹</button>
  <button onclick="pasteCode()">ðŸ“¥</button>
  <button onclick="selectAll()">ðŸ”²</button>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.15/codemirror.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.15/mode/htmlmixed/htmlmixed.min.js"></script>

<script>
document.addEventListener("DOMContentLoaded",()=>{
  const cm = CodeMirror.fromTextArea(editor,{
    mode:"htmlmixed",
    theme:"dracula",
    lineNumbers:true
  });

  const preview = document.getElementById("preview");
  const appFrame = document.getElementById("appFrame");
  let autoRun=false, previewOnly=false;

  cm.setValue(`<!DOCTYPE html>
<html>
<body>
<h1>Hello Codyza</h1>
<p>Edit and Run</p>
</body>
</html>`);

  function run(){ preview.srcdoc = cm.getValue(); }
  function clearEditor(){
    if(confirm("Clear editor?")){
      cm.setValue("");
      preview.srcdoc="";
    }
  }
  function clearPreview(){ preview.srcdoc=""; }
  function toggleAuto(){ autoRun=!autoRun; }
  function toggleFullPreview(){
    previewOnly=!previewOnly;
    appFrame.classList.toggle("preview-only",previewOnly);
  }

  cm.on("change",()=>{ if(autoRun) run(); });

  runBtn.onclick = run;
  darkToggle.onclick = ()=>document.body.classList.toggle("dark");

  window.copyCode = ()=>navigator.clipboard.writeText(cm.getValue());
  window.pasteCode = ()=>navigator.clipboard.readText().then(t=>cm.replaceSelection(t));
  window.selectAll = ()=>cm.execCommand("selectAll");
  window.clearEditor = clearEditor;
  window.clearPreview = clearPreview;
  window.toggleAuto = toggleAuto;
  window.toggleFullPreview = toggleFullPreview;

  function makeResizable(resizer, panel){
    let active=false;
    resizer.onmousedown=e=>{active=true;e.preventDefault();};
    document.onmousemove=e=>{
      if(!active) return;
      let h=e.clientY-panel.getBoundingClientRect().top;
      if(h>120){ panel.style.height=h+"px"; cm.refresh(); }
    };
    document.onmouseup=()=>active=false;
  }

  makeResizable(editorResizer,editorWrap);
  makeResizable(previewResizer,previewWrap);
});
</script>
</body>
  </html>
